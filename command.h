#ifndef COMMAND_H
#define COMMAND_H

#include "field.h"    
#include "history.h"
#include <stdbool.h>

/**
 * Структура Options хранит настройки, заданные в командной строке.
 */
typedef struct {
    int interval;    // Задержка между обновлениями (в секундах)
    bool display;    // true — выводить поле в консоль; false — нет
    bool save;       // true — сохранять результат в файл; false — нет
} Options;

/**
 * Перемещает динозавра на одну клетку в заданном направлении.
 * Возвращает false, если динозавр упал в яму (критическая ошибка).
 * Возвращает true в остальных случаях (включая блокировку препятствием).
 */
bool move_dino(Field* f, const char* dir);

/**
 * Выполняет прыжок динозавра на n клеток в заданном направлении.
 * Проверяет путь: останавливается перед деревом/камнем/горой, падает в яму.
 * Возвращает false при падении в яму, иначе — true.
 */
bool jump_dino(Field* f, const char* dir, int n);

/**
 * Окрашивает текущую клетку динозавра в указанную строчную букву.
 * Возвращает false, если буква не в диапазоне 'a'–'z'.
 */
bool paint_cell(Field* f, char c);

/**
 * Изменяет соседнюю клетку в заданном направлении.
 * - new_symbol: символ нового объекта ('%', '^', '&', '@')
 * - require_empty: если true, объект можно создать только на пустой клетке '_'
 * Особый случай: MOUND в яму → яма засыпается.
 */
bool modify_adjacent(Field* f, const char* dir, char new_symbol, bool require_empty);

/**
 * Удаляет дерево в соседней клетке по направлению.
 * Если там нет дерева — ничего не делает (но не ошибка).
 */
bool cut_tree(Field* f, const char* dir);

/**
 * Толкает камень в соседней клетке по направлению.
 * Камень движется дальше в том же направлении, пока не упрётся или не упадёт в яму.
 */
bool push_stone(Field* f, const char* dir);

/**
 * Проверяет, можно ли переместиться в клетку (x, y).
 * Возвращает false, если там яма, гора, дерево или камень.
 */
bool can_move_to(Field* f, int x, int y);

#endif